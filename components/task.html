<div id="task-template">
  <div class="task-item" id="task-{{id}}">
    <div>{{ name }}</div>
    <div>{{{ html_description }}}</div>
  </div>
</div>

<script>
let indexes = 0;
var Tasks = {};
class Task {
  constructor(cfg={}) {
    this.data = Object.assign({
      id: false,
      day: 'today',
      name: 'default name',
      description: '[bruh](https://example.com)',
      subtasks: [],
      color: false,
      completed: false,
    }, cfg);
    if (this.data.id == false) {
      this.data.id = ++indexes;
    }
    for (let key of Object.keys(this.data)) {
      Object.defineProperty(this, key, {
        get() {
          return this.data[key];
        },
        set(value) {
          this.data[key] = value;
          TaskList.update(this);
        }
      })
    }
    Tasks[this.data.id] = this;
  }
  render() {
    return Mustache.render(document.querySelector('#task-template').innerHTML, {
      ...this.data,
      html_description: marked(this.data.description),
    });
  }
  hook($el) {
    console.log('HOOKING TO', $el);
  }

}
</script>

<style lang="scss">
  .task-item {
    background-color: red;
    &:hover {
      background-color: blue;
    }
  }
</style>
